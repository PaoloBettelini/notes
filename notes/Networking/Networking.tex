\documentclass{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{parskip}
\usepackage{fullpage}
\usepackage{hyperref}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
    urlcolor=blue,
    pdftitle={Networking},
    pdfpagemode=FullScreen,
}

\title{Networking}
\author{Paolo Bettelini}
\date{}

\begin{document}

\maketitle
\tableofcontents
\pagebreak

\section{Router}

Il router è un nodo della rete che si occupa della commutazione dei pacchetti
a livello 3 del modello OSI.
\\
La communtazione è dunque basata sugli indirizzi
di livello 3 del modello OSI.
\\
Il route si occupa di instradare i pacchetti fra 2 o più sottoreti.
A ciascuna delle sottoreti è assegnata un'interfaccia.

\section{Switching}

Con switching si intende l'instradamento effettuato
a livello di collegamento.
\\
La commutazione
avviene al livello 2.
\\
Gli switch contengono una tabella di rete
contenente gli indirizzi MAC di tutti i computer
collegati.

% Autonomous System (per IGP e EGP)

\subsection{Routing protocols}
Le rotte possono essere specificate manualmente
(static routing), oppure possono essere utilizzati
dei protocolli che permettono ai router di scambiarsi
le informazioni circa la topologia della rete.
%OSPF, RIP, BGP

\subsection{Algoritmi non adattivi}

\subsubsection{Dijkstra Algorithm}

Permette di trovare i cammini minimi in un grafo.

\subsubsection{Flooding}

Consiste nell'inoltrare un pacchetto pacchetto in ingresso su
tutte le linee ad eccezione di quella da cui proviene.

\subsection{Algoritmi adattivi}

\subsubsection{Tipologia}

I protocolli di instradamento sono principalmente
divisi in due categorie: quelli interni al proprio
sistema autonomo (\textbf{IGP}, Interior Gateway Protocol),
mentre quelli fra sistemi autonomi (\textbf{EGP}, Exterior Gateway Protocol).

\subsubsection{IGP}

Questi protocolli possonoe ssere suddivisi in due categorie principali:
\textbf{Distance Vector} e \textbf{Link State}.
I protocolli Distance Vector inviano informazioni circa la topologia solo ai router adiancenti,
mentre quelli di tipo Link State comunicano con tutti i router del proprio sistema autonomo.

\pagebreak

Protocols:

\begin{itemize}
    \item \textbf{Distance Vector}
    \begin{itemize}
        \item \textbf{RIP} (Routing Information Protocol)
        \item \textbf{IGRP} (Interior Gateway Routing Protocol)
    \end{itemize}

    \item \textbf{Link State}
    \begin{itemize}
        \item \textbf{IS-IS} (ntermediate System to Intermediate System)
        \item \textbf{OSPF} (Open Shortest Path First)
    \end{itemize}

    \item \textbf{Ibridi}
    \begin{itemize}
        \item \textbf{EIGRP} (Enhanced Interior Gateway Routing Protocol)
    \end{itemize}
\end{itemize}

\subsubsection{EGP}

Protocols:

\begin{itemize}
    \item \textbf{EGP} (Exterior Gateway Protocol), obsolete
    \item \textbf{BGP} (order Gateway Protoco)
\end{itemize}

\subsection{Distance Vector}

Il protocollo Distance Vector, anche noto come \textbf{Bellman-Ford} routing, è un
algoritmo di routing dinamico che tiene conto del carico istantaneo della rete.
Questi algoritmi sono più leggeri rispetto a quelli Link State.

Ogni router misura periodicamente la distanza (secondo vari fattori) che lo
separa dai nodi adiacenti e riceve i dati dai router vicini. Utilizzando l'algoritmo di Bellman-
Ford, stima \textit{distanza} e calcola \textit{il primo passo del percorso}.

\subsection{Link State}

Il protocollo Link State conosce l'intera topologia della rete e tutti i costi dei vari collegamenti.
\\
I nodi calcolano e inviano le informazioni sulla rete agli altri nodi mediante dei pacchetti
\textbf{link state broadcast}.
Ognu router sfrutta un algoritmo di Dijkstra per calcolare il cammino minimo a tutti gli altri nodi
della rete.

\subsection{RIP Protocol}

Il protocollo RIP è un protocollo Distance Vector ed utilizza il conteggio degli hop
come metrica. Il massimo di hop è 15 e trasmette ogni 30 secondi la propria tabella di routing.

Ci sono 3 versioni di RIP: RIPv1, RIPv2, e RIPng

\begin{itemize}
    \item \textbf{RIPv1}: Gli aggiornamenti delle tabelle di routing non contengono
        la maschera di sottorete rendendo impossibile la creazione di sottoreti di dimensione
        diversa all'interno della stessa rete. Non c'è autenticazione.

    \item \textbf{RIPv2} Include il trasporto delle informazioni sulla maschera
        di sottorete, supportando così il Classless Inter-Domain Routing, CIDR.
        Autenticazione semplice con testo in chiaro e MD5
    \item \textbf{RIPng} È un’estensione del protocollo originale RIPv1 per supportare IPv6.
\end{itemize}

\pagebreak

\subsection{IGRP Protocol}

L'Interior Gateway Routing Protocol (IGRP) è un protocollo di routing di tipo Distance Vector.
\\
Supporta metriche multiple quali \textit{larghezza di banda}, \textit{carico della linea},
\textit{ritardo e affidabilità}.
\\
Il massimo di hop è 255 e la trasmissione della tabella di routing avviene ogni 90 secondi.

\subsection{EIGRP Protocol}

L'Enhanced Interior Gateway Routing Protocol è il successore dell'IGRP.
\\
L'aggiornamento delle informazioni del network avviene solo quando c'è un cambiamento di stato.
Il massimo numero di hop è 244.

\subsection{IS-IS Protocol}

L'Intermediate System To Intermediate System è un protocollo di routing di tipo Link
State che permette agli Intermediate System (IS) all'interno di un dominio di Routing di scambiarsi
configurazioni e informazioni di Routing.

\subsection{OSPF Protocol}

Il protocollo Open Shortest Path First è uno dei protocolli più diffusi (Link State).
\\
L'aggiornamento delle informazioni del network avviene solo quando c'è un cambiamento di stato.

%\subsection{EGP Protocol}
%\subsection{BGP Protocol}

\section{Hub}

L'hub è un dispositivo di rete che funga da nodo si smistamento.
L'hub è un ripetitore multiporta, questo significa che inoltre i pacchetti su tutte le sue porte.

Vi sono tre categorie di Hub:

\begin{itemize}
    \item \textbf{Attivi}: più diffusi, essi necessitano di alimentazione per amplificare il segnale.

    \item \textbf{Passivi}: Non amplificano il segnale, quindi non
        necessitano di alimentazione. Si limitano a connettere fisicamente i cavi.

    \item \textbf{Ibridi}: Sono particolari ed avanzati hub che permettono il collegamento tra più
        tipologie di cavo.
\end{itemize}

\section{Bridge}

Un bridge è un dispositivo di rete che si colloca al livello (2) datalink del modello ISO/OSI e che
traduce da un mezzo fisico ad un altro all'interno di una stessa rete locale.
\\
Il bridge è in grado di leggere i frame dei vari pacchetti ed individuare mittente e destinatario.
\\
Il bridge differisce dallo switch in quanto ha generalmente meno porte ed è spesso usato per
connettere diversi segmenti di rete, piuttosto che i singoli host.
\\
Quando riceve un frame identifica il destinatario.

\begin{itemize}
    \item Se si trova nello stesso segmento del mittente evita di inoltrare il messaggio
    \item Se non si trova nello stesso segmento inoltra il messaggio verso il segmento del destinatario
    \item Se il segmento del destinatario è sconosciuto, inoltra il messaggio su tutte le sue porte eccetto
        quella del mittente
\end{itemize}

\pagebreak

\subsection{Collisions}

Ogni segmento di rete collegato ad una porta di un bridge costituisce un dominio di collisione.
Il bridge applica l'algoritmo \textbf{CSMA/CD} se individua un problema di collisione su un segmento di rete.

\subsection{Spanning Tree}

Per questioni di affidabilità è possibile creare delle connessioni ridondanti fra i segmenti di rete.
Questo potrebbe portare ad un loop di moltiplicazione del messaggio.

Il problema si evita con la creazione automatica di uno spanning tree, cioè di un sottogruppo della
rete privo di anelli.

Le porte del bridge (e switch) possono essere in 5 stati

\begin{enumerate}
    \item Blocking
    \item Listening
    \item Learning
    \item Forwarding
    \item Disabled
\end{enumerate}

Da ogni stato si può solamente passare ad uno degli stati successivi.

\subsection{Switch}

Lo switch è un commutatore di pacchetti del livello 2 (Data-Link del modello ISO/OSI)
che si occupa di instradare i pacchetti all'interno di una rete locale.
Esistono tuttavia switch che lavorano al livello 3.
A differenza dell'hub, i pacchetti vengono letti e inoltrati solamente sulla porta collegata al destinatario.

Esistono 3 tipologie di instradamento che possono essere utilizzate da uno switch:

\begin{itemize}
    \item \textbf{cut-through} Legge l'indirizzo MAC del destinatario e comincia immediatamente la trasmissione
        durante la lettura dello stesso.
    \item \textbf{store-and-forward} Viene letto l'intero frame e viene calcolato il \textbf{CRC} (Cyclic redundancy check)
        e lo confronta con il campo \textbf{FCS}. Se i due non combaciano non viene inoltrato.
    \item \textbf{fragment-free} Vengono controllati solo i primi 64 byte del frame
\end{itemize}

\section{Access Point}

\subsection{Definition}

Un Access Point (AP) è un dispositivo che permette all'utente mobile di collegarsi ad una rete
\textit{wireless}. Esso agisce da gateway per i client wireless.

L'AP comunica alle stazioni riceventi nel proprio raggio di copertura l'\textbf{SSID} (Service Set Identifier)
della rete o delle reti locali wireless che sta servendo.

\pagebreak

\subsection{Wireless security}

La procedura più semplice è quella di permettere l'accesso solo ad alcuni indirizzi \textbf{MAC}.
Tuttavia, essi possono essere clonati.

Un'altra tecnica è quella di non annunciare l'\textbf{SSID}. Tuttavia, è comunque possibile
individuare la rete sniffando i segnali.

La maggior parte degli Access Point implementava un sistema di cifratura dei dati denominato
\textbf{WEP} Wired Equivalent Privacy, ma è ora diventato insicuro.
Attualmente vengono utilizzati i protocolli \textbf{WPA} e \textbf{WPA2} (WI-FI Protected Access).

\subsubsection{WEP}

Il Wired Equivalent Privacy è l'implementazione dello standard \textit{IEEE 802.11}.
La comunicazione è cifrata simmetricamente utilizzando l'algoritmo \textbf{RC4}.
Questo protocollo utilizza una chiave a 40/64 bit (10 hex digits) oppure 104/128 (26 hex digits).
A queste vengono aggiunti 24 bit per l'\textbf{IV} (Initialization Vector). 

\subsubsection{WAP}

Il Wi-Fi Protected Access è l'implementazione dello standard \textit{IEEE 802.11i}.
L'architettura \textit{IEEE 802.11i} utilizza lo standard \textit{IEEE 802.1x} per l'autenticazione
dei client, server e la distribuzione delle chiavi per ogni utente.
Può inoltre supportare la \textbf{PDK} (Pre-Shared Key).
\\
\textbf{WAP} implementa il protocollo \textbf{TKIP} (Tempora Key Integrity Protocol), il quale
cambia dinamicamente al chiave ogni pochi minuti e la combina con un \textbf{IV} di 48-bit.
\\
Viene utilizzato l'algoritmo \textbf{RC4} per la cifratura.
\\
L'algoritmo per verificare l'integrità pacchetti è \textbf{Michael} (A differenza di \textbf{CRC nel WEP}),
che include un contatore per evitare le ristramissioni malevoli.

This protocol is no longer secure.

\subsubsection{WAP2}

Wi-Fi Protected Access 2 sostituisce WAP e si differenzia dall'algoritmo di cifrature \textbf{CCMP}
(Counter-Mode/CBC-Mac Protocol) per la gestione delle chiavi e dell'integrità dei messaggi.
\\
\textbf{CCMP} è basato sull'algoritmo di cifratura simmetrica \textbf{AES}/128-bit (Advanced Encryption Standard).

\subsubsection{WAP and WAP2}

Con i protocolli \textbf{WAP/WAP2} sono supportate le modalità \textbf{WPA-PSK}
(il client deve conoscere la \textbf{PSK} per associarsi ad un \textbf{SSID}) e la modalità
\textbf{WPA-EAP} (il client si autentica con username e password o certificato \textbf{X.509}),
anche nota come \textbf{WPA Enterprise}.
\\
I certificati \textbf{X.509} sono autenticati da un server \textbf{RADIUS}
(Remote Authentication Dial-In User Service).

\pagebreak

\section{VLAN}

Le \textbf{VLAN} (Virtual LAN) sono delle tecnologie che permettono di segmentare
un dominio di broadcast. Le VLAN sono principalmente utilizzate per separare
il traffico e applicare diverse policy di sicurezza.

\subsection{Trunking}

\textbf{VLAN Trunking} è una tecnologia che permette la comunicazione fra 2 VLAN.

\subsection{Tipologia}

\begin{itemize}
    \item \textbf{Locali} Sono locali ad uno switch o ad un gruppo di switch 
    \item \textbf{End-to-End} Si estendono per tutta la rete e molteplici switch
\end{itemize}

\section{Firewall}

Un firewall è un componente passivo di difesa perimetrale.
Il firewall si occupa di filtrare tutti i pacchetti mediante delle policy.

\subsection{NAT}

Il \textbf{NAT} (Network Address Translation)
è una tecnica che consnste nel modificare gli idnirizzi IP dei pacchetti
in transito su un sistema che agisce da router o da firewall.

Il NAT si può distinguere in
\textbf{SNAT} (Source NAT) e \textbf{DNAT} (Destination NAT), a
dipendenza di se viene modificato l'indirizzo sorgente o quello
di destinazione.

\subsubsection{SNAT}

SNAT permette ad ogni host di una rete interna
di essere mappato ad un diverso IP pubblico.

\subsubsection{DNAT}

È un caso particolare di SNAT dove il traffico degli host della rete interna viene modificato dal
router con il proprio IP pubblico. Il router si occupa di smistare
le varie connessioni.

Questa tecnica è anche chiamata \textbf{PAT} (Port Address Translation)
 o IP masquerating e spreca meno IP pubblici.

\subsubsection{Port forwarding vs IP masquerating}

La differenza tra PAT e Port forwarding è che la mappatura
delle porte di destinazione nel port forwarding sono le medesime,
mentre nel PAT vengono cambiate. Questo permette a molteplici server
all'interno della rete privata di essere direttamente contattati.

\pagebreak

\section{Common protocols}

\subsection{FTP}

In una connessione FTP attiva, il client apre una porta e ascolta
e il server si collega attivamente ad esso.
In una connessione FTP passiva, il server apre una porta e ascolta
(passivamente) e il client si connette ad esso. 

\subsubsection{Attivo}

\begin{enumerate}
    \item Il client inizia una connessione (generalmente sulla porta 21) verso il server e comunica la porta in cui si pone in ascolto (generalmente una porta random decisa dal client) per lo scambio dei dati;
    \item Il server conferma la connessione (nel caso validando le credenziali)
    \item Il server apre una connessione verso il client sulla porta comunicata
    \item Il client conferma la connessione
    \item Inizia la trasmissione dei dati
\end{enumerate}

\subsubsection{Passivo}

\begin{enumerate}
    \item Il client inizia una connessione (generalmente sulla porta 21) verso il server;
    \item Il server conferma la connessione (nel caso validando le credenziali) e comunica la porta in cui si pone in ascolto (generalmente una porta random in un preciso range impostato lato server) per lo scambio dei dati;
    \item Il client apre una connessione verso il server sulla porta comunicata x la trasmissione dei dati
    \item Il server conferma la connessione
\end{enumerate}

\subsection{SFTPS and FTPS}

L’SFTP necessita di solamente una porta per tutte le comunicazioni, mentre l’FTPS utilizza porte multiple (la prima porta per l’autenticazione/comandi, porta 990), mentre viene utilizzata sempre una nuova porta per il trasferimento di file).
FTPS aggiunge un livello di sicurezza a FTP, mentre SFTP è completamente un altro protocollo basato su SSH (porta 22).

\subsection{SSH}

SSH (Secure Shell) è un protocollo che permette di stabilire una connessione remota cifrata. È il successore di Telnet. SSH opera sulla porta porta 22.

\subsection{SSL and TLS}

TLS (Transport Layer Security) è la versione più sicura del SSL (Secure Socket Layer). 
Entrambi sono un protocollo di sicurezza basato sui certificati. Affinché una comunicazione sia sicura con i certificati è necessario che essi vengano emessi da una CA (Certificate Authority).

\end{document}
