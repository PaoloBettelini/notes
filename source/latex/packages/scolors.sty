\ProvidesPackage{scolors}[2023/01/01 Stellar definition commands]

\RequirePackage{xcolor}

% Define a flag to track whether the global color is set
\newif\ifcolorisset

% Set the global math color and start using it
\ExplSyntaxOn
\DeclareDocumentCommand{\scolor}{d[]}{%
    \global\def\mathcolorOverride{#1}%
    \colorissettrue% Set the flag to true
    \color{#1}%
}
\ExplSyntaxOff

% Clear the global math color and reset it
\ExplSyntaxOn
\DeclareDocumentCommand{\clear}{d[]}{%
    \undef\mathcolorOverride% Unset the color
    \colorissetfalse% Set the flag to false
    \color{black}%
}
\ExplSyntaxOff

% Start using the global color is set, use the specified color otherwise
\ExplSyntaxOn
\DeclareDocumentCommand{\scolorweak}{d[]}{%
    \ifcolorisset
        \color{\mathcolorOverride}%
    \else
        \color{#1}%
    \fi
}
\ExplSyntaxOff

% === List of colors ===

\newcommand{\red}{\scolor[red]}
\newcommand{\green}{\scolor[green]}
\newcommand{\blue}{\scolor[blue]}
\newcommand{\cyan}{\scolor[cyan]}
\newcommand{\magenta}{\scolor[magenta]}
\newcommand{\yellow}{\scolor[yellow]}
\newcommand{\black}{\scolor[black]}
\newcommand{\gray}{\scolor[gray]}
\newcommand{\white}{\scolor[white]}
\newcommand{\darkgray}{\scolor[darkgray]}
\newcommand{\lightgray}{\scolor[lightgray]}
\newcommand{\brown}{\scolor[brown]}
\newcommand{\lime}{\scolor[lime]}
\newcommand{\olive}{\scolor[olive]}
\newcommand{\orange}{\scolor[orange]}
\newcommand{\pink}{\scolor[pink]}
\newcommand{\purple}{\scolor[purple]}
\newcommand{\teal}{\scolor[teal]}
\newcommand{\violet}{\scolor[violet]}