\documentclass[preview]{standalone}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{stellar}
\usepackage{definitions}

\begin{document}

\id{hopital-rule}
\genpage

\section{L'Hôpital Rule}

\begin{snippettheorem}{hopital-rule}{L'Hôpital Rule}
    Let \(f,g \colon I \to \realnumbers\) in the cases
    \(I = (a, \xi)\), \(I = (\xi, b)\) and \(I = (a, b)\)
    for \(a,b\in\realnumbers\) and \(\xi \in \extendedrealnumbers\). \\
    Let \(L = \xi^-\), \(L=\xi^+\) and \(L=\xi\) for the respective cases. \\
    Suppose the following:
    \begin{enumerate}
        \item \(f,g\) are differentiable in \(I\);
        \item \(\forall x \in I, g(x) \neq 0 \land g'(x) \neq 0\);
        \item either \(f(x),g(x)\to 0\) or \(g(x)\to\pm\infty\) for \(x \to L\);
        \item \[
            \lim_{x\to L} \frac{f'(x)}{g'(x)} = \lambda \in \extendedrealnumbers
        \]
    \end{enumerate}
    Then,
    \[
        \lim_{x\to L} \frac{f(x)}{g(x)} = \lambda
    \]
\end{snippettheorem}

\begin{snippetproof}{hopital-rule-proof}{hopital-rule}{L'Hôpital rule}
    Consider the case where \(f,g \to 0\) for \(x\to \xi\).
    We need to compute
    \[
        \lim_{x\to\xi^-} \frac{f(x)}{g(x)}
    \]
    We want to apply Cauchy's theorem: note that since \(f(x), g(x) \to 0\),
    we can set \(f(\xi) = g(\xi)=0\) and obtain functions that are:
    \begin{enumerate}
        \item continuous in \((a,\xi]\);
        \item differentiable in \((a,\xi)\)
    \end{enumerate}
    e inoltre per ipotesi \(g'(x), g(x) \neq 0\) in \((a,\xi)\) e valgono le ipotesi del teorema di Cauchy.
    \([x, \xi]\) per ogni \(x\in (a,\xi)\).
    Quindi, 
    \[
        \frac{f(x)}{g(x)} = \frac{f(x) - f(\xi)}{g(x) - g(\xi)}
    \]
    e per Cauchy esiste \(c_x \in (x,\xi)\) tale che
    \[
        \frac{f(x)}{g(x)} = \frac{f(x) - f(\xi)}{g(x) - g(\xi)} = \frac{f'(c_x)}{g'(c_x)}
    \]
    Per \(x\to \xi^-\), \(c_x \to \xi^-\) e per ipotesi
    \[
        \frac{f(c_x)}{g(c_x)} \to \lambda
    \]
    cosicché
    \[
        \exists \lim_{x\to \xi^-} \frac{f(x)}{g(x)} = \lambda = \lim_{x\to \xi^-} \frac{f'(x)}{g'(x)}
    \]
\end{snippetproof}

\end{document}